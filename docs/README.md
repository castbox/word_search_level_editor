# Word Search 关卡编辑器

一个现代化的桌面应用，用于手动或批量创建、编辑 Word Search（单词搜索）游戏关卡。基于 Electron，支持丰富的交互、奖励单词检测、批量生产、关卡复刻等功能。

---

## 功能亮点

### 基础功能
- **可调网格**：支持 5x5 ~ 20x20 尺寸的字母网格
- **单词拖拽放置**：支持水平、垂直、对角线及其逆向
- **单词列表管理**：添加、删除、标记已放置/未放置
- **交叉单词渐变色**：交叉点自动高亮
- **关卡保存/加载**：本地 JSON 文件，支持关卡库管理

### 高级功能
- **奖励单词检测**：自动识别网格中除目标单词外的所有字典单词，点击可高亮
- **批量生成空白关卡**：一键生成多组随机网格和单词符号配置，适合批量出题
- **关卡复刻**：支持特殊关卡（单词对），奖励单词自动检测
- **预览与导出图片**：玩家视角预览，支持一键保存为图片
- **自动填充**：智能填充空白格，字母分布更自然
- **导入配置**：支持导入标准 JSON 配置文件，自动还原网格与单词

### 🆕 智能词频分析
- **BNC-COCA 词频分析**：基于英语语料库的词频等级显示（高频/中频/低频）
- **分层关卡统计**：
  - 智能合并正式关卡（levels/lv1_500.json）和编辑器关卡
  - 以当前编辑器关卡等级为基准进行统计（如第147关则统计第1-147关）
  - 编辑器关卡优先于正式关卡（同等级时使用编辑器版本）
- **关卡使用统计**：自动统计单词在关卡范围内的使用次数
- **近期使用追踪**：显示单词在近5关中的使用情况（相对于当前关卡等级）
- **新单词标识**：首次使用的单词会有特殊标识 ✨
- **词频详情弹窗**：点击 `!` 按钮查看单词的完整词频信息和使用历史
- **智能提示**：帮助您平衡单词难度，避免重复使用相同单词
- **动态分析**：关卡等级变化时自动重新统计词频数据

### 用户体验
- **颜色编码**：拖拽单词、自动单词、手动字母、交叉点、奖励单词均有不同高亮
- **双击单元格直接编辑**
- **实时状态提示与错误反馈**
- **响应式布局，适配不同屏幕**
- **词频可视化**：直观的标签和统计信息

---

## 安装与运行

1. 克隆仓库
   ```bash
git clone https://github.com/yourusername/word_search_level_editor.git
cd word_search_level_editor
```

2. 安装依赖
   ```bash
npm install
```

3. 启动应用
   ```bash
npm start
```

4. （可选）打包桌面应用
   ```bash
npm run build
```
   构建产物在 `dist/` 目录，支持 Windows/macOS/Linux。

---

## 使用指南

### 主要页面入口
- **首页**：选择手动编辑、批量生成、关卡复刻、关卡库
- **手动编辑**：自定义网格、单词、奖励单词，支持导入/导出
- **批量生成**：一键生成多组空白关卡，符号化单词，适合批量出题
- **关卡复刻**：支持普通和特殊（单词对）模式，奖励单词自动检测
- **关卡库**：浏览、编辑、删除本地已保存关卡

### 常用操作
1. **新建关卡**：设置网格大小、标题，点击"创建关卡"
2. **添加单词**：输入单词，点击"添加"或回车
3. **放置单词**：点击单词，拖动到网格，按 R 键切换方向
4. **编辑字母**：双击网格单元格直接输入
5. **自动填充**：点击"自动填充空白网格"
6. **保存/导出**：点击"保存关卡"或"生成配置文件"
7. **奖励单词**：点击"查看奖励单词"可查看并高亮所有自动检测到的 bonus word
8. **批量导出**：在批量生成页面可一键导出多组关卡
9. **🆕 关卡快速切换**：在编辑器页面，当从关卡库加载关卡时，将显示左右切换按钮，可快速浏览所有关卡

### 🆕 词频功能使用
1. **设置关卡等级**：在编辑器中设置当前关卡等级，系统会基于此等级进行统计
2. **查看词频标签**：添加单词后，可看到颜色编码的词频等级标签
3. **查看使用统计**：新单词会显示 ✨ 标识，已使用单词显示使用次数
4. **详细词频信息**：点击单词旁的 `!` 按钮查看完整词频详情
5. **使用历史**：在词频详情中可查看单词在哪些关卡中使用过
6. **词频统计**：单词列表顶部显示整体词频分布统计
7. **动态更新**：修改关卡等级时，词频统计会自动重新计算

---

## 关卡文件格式

关卡保存为 JSON，结构如下（以实际导出为准）：

```json
[
{
    "title": "关卡标题",
    "grid": {
      "width": 8,
      "height": 9,
  "letters": [
        ["A", "B", "C", ...],
        ...
  ],
  "placedWords": [
    {
          "word": "WORD",
          "positions": [{"row":0,"col":0}, ...],
      "color": "#e74c3c",
          "id": 0,
          "direction": "diagonal",
      "isDragged": true
        }
      ]
    },
    "words": [
      {"word": "WORD", "pos": "0,0;0,3"},
      ...
    ],
    "bonus": "BONUS1,BONUS2,...",
    "sentence": "",
    "type": 1,
    "id": "WSXXXX"
  }
]
```
- `grid.letters`：二维字母数组
- `grid.placedWords`：每个已放置单词的详细坐标、颜色、方向
- `words`：单词及其首尾坐标（导出时为符号或真实单词）
- `bonus`：奖励单词，逗号分隔
- `type`：1=普通关卡，2=特殊关卡（单词对）
- `id`：唯一关卡ID

---

## 技术栈

- **Electron**：桌面应用
- **JavaScript**：主逻辑
- **HTML/CSS**：界面
- **html2canvas**：预览图片导出
- **Node.js**：本地文件操作
- **BNC-COCA 词频数据**：英语单词频率分析

---

## 词频数据说明

### BNC-COCA 词频等级
- **高频词**：1K-3K 范围内的常用词汇
- **中频词**：4K-9K 范围内的一般词汇
- **低频词**：10K+ 范围内的高难度词汇
- **未知词**：不在 BNC-COCA 词频表中的词汇

### 关卡使用统计
- **总使用次数**：该单词在当前关卡等级范围内的使用次数
- **近5关使用**：该单词在最近5个关卡中的使用次数（相对于当前关卡等级）
- **使用历史**：显示具体在哪些关卡中使用过该单词
- **统计范围**：动态显示基于当前编辑器关卡等级的统计范围
- **数据源**：智能合并正式关卡和编辑器关卡，编辑器关卡优先

---

## 注意事项

- 最大网格 20x20，建议不超过此范围
- 奖励单词检测依赖 `dictionary.txt` 英文字典
- 词频分析依赖 `BNC_COCA.csv` 词频数据文件
- 关卡文件存储在 `levels/` 目录
- 导入导出均为标准 JSON 格式，兼容主流 Word Search 游戏
- 词频分析会在启动时自动加载正式关卡和编辑器关卡进行分层统计
- 词频统计范围基于当前编辑器关卡等级动态调整（如第147关统计第1-147关）
- 编辑器关卡会优先于正式关卡参与统计（同等级时使用编辑器版本）

---

## 许可证

ISC 

---

如需详细开发文档或遇到问题，请查阅源码或提交 issue。 